# 需求分析（PRD）- Onboarding

**版本**: 1.0
**状态**: Draft
**关联**: epic/index.md（总需求）

## 1. 概述
- 问题陈述: 新用户需要快速理解产品价值并完成登录。
- 解决方案: Cinematic Intro + Sign in with Apple + Soft Ask 权限策略。
- 范围（包含）:
  - Cinematic Intro
  - Sign in with Apple
  - 权限说明与 Soft Ask
- 范围（不包含）:
  - Discover/Connections/Me 的具体内容

## 2. 目标与成功指标
- 业务目标: 提升登录完成率与首次体验满意度。
- 用户目标: 在不被打扰的前提下理解产品价值。
- 成功指标（KPIs）:
  - 登录完成率
  - 引导跳过率
  - 权限授权率

## 3. 用户与场景
- 目标用户/画像:
  - 新用户
- 主要场景:
  - 首次启动完成引导
- 边缘场景:
  - 拒绝授权与登录

## 4. 需求
### 4.1 功能性需求
- FR-1 Cinematic Intro
  - 描述: 10 秒以内的产品氛围视频。
  - 验收标准:
    - Given 首次启动, When 引导开始, Then 播放 intro 并可跳过。
- FR-2 Sign in with Apple
  - 描述: 提供 Apple 登录与 Hide My Email。
  - 验收标准:
    - Given 用户点击登录, When 授权完成, Then 进入主页。
- FR-3 Soft Ask 权限策略
  - 描述: 在用户需要解锁时才申请定位权限。
  - 验收标准:
    - Given 用户进入 Discover, When 未触发解锁, Then 不弹出权限。

### 4.2 非功能性需求
- 性能: Intro 视频可快速加载。
- 隐私: 权限用途说明清晰。
- 可访问性: 引导文案可读。

## 5. 用户体验
- 关键用户流程:
  - Intro → 登录 → 进入 Discover
  - Discover → 解锁触发 → 权限申请
- 信息架构:
  - Intro 页面 + 登录页面
- 交互模型:
  - 轻触跳过与继续
- 内容模型:
  - 文案与短视频

## 6. 线框图（低保真）
- 线框 A [Intro]
```
┌─────────────────────────┐
│ Cinematic Intro          │
│ [ Skip ]                 │
└─────────────────────────┘
```

- 线框 B [Sign in]
```
┌─────────────────────────┐
│ Welcome to Aura          │
│ [ Sign in with Apple ]   │
└─────────────────────────┘
```

- 线框 C [Soft Ask]
```
┌─────────────────────────┐
│ We need your location…   │
│ [ Allow ]   [ Not Now ]  │
└─────────────────────────┘
```

- 状态:
  - 空: 文案“暂时离线，先看看也可以”，主操作“重试”，次操作“先浏览”
  - 加载: 文案“序章准备中/登录中/权限处理中…” + 进度指示
  - 错误: 文案“登录没成功/视频未加载”，主操作“重试”，次操作“跳过/稍后再说”

## 7. HIG 对齐
| 原则 | 需求映射 | 备注 |
| --- | --- | --- |
| 清晰 | 引导文案简洁 | 降低流失 |
| 克制 | 权限请求延后 | 尊重用户 |
| 层次 | Intro → 登录 → 权限 | 步进结构 |
| 审美一致性 | 视觉与品牌情绪一致 | 氛围统一 |
| 一致性 | 组件与按钮风格统一 | 降低学习 |
| 直接操作 | 明确的按钮与跳过 | 操作直观 |
| 反馈 | 登录与权限状态明确 | 透明体验 |
| 隐喻 | Intro 传达“地点记忆” | 主题明确 |
| 用户可控 | 支持跳过与拒绝 | 可控路径 |

## 8. 数据与分析
- 关键事件:
  - intro_start, intro_skip
  - signin_start, signin_success
  - permission_prompt, permission_granted

### 错误码与处理
| 错误码 | 场景 | 用户文案 | 行为 |
| --- | --- | --- | --- |
| ONBOARDING_NET_UNAVAILABLE | 网络不可用 | “暂时离线，先看看也可以” | 主操作“重试”，次操作“先浏览” |
| ONBOARDING_INTRO_LOAD_FAIL | Intro 加载失败 | “序章暂时缺席” | 主操作“重试”，次操作“跳过” |
| ONBOARDING_SIGNIN_FAIL | 登录失败 | “登录没成功” | 主操作“重试”，次操作“稍后再说” |
| ONBOARDING_PERMISSION_DENIED | 权限被拒 | “需要位置权限才能解锁” | 主操作“去设置”，次操作“稍后再说” |

## 9. 风险与应对
- 风险: 引导过长导致流失
  - 应对: 简化内容与支持跳过

## 10. 依赖与约束
- 依赖: Sign in with Apple、视频资源
- 约束: 低网速时需缓存或降级

## 11. 里程碑
- MVP: Intro + 登录
- V1: Soft Ask 权限策略
- Future: 个性化引导

## 12. 开放问题
- 是否需要多语言引导版本？

## 13. 假设
- 用户愿意完成 Apple 登录
